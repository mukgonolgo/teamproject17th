<!DOCTYPE html>
<html layout:decorate="~{layout}">

<head>
	<title>ê°€ê²Œ ìƒì„¸ ì •ë³´</title>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" rel="stylesheet" />
	<!-- ì»¤ìŠ¤í…€ CSS ì¶”ê°€ -->
	<link rel="stylesheet" href="/css/store/store_detail.css">
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
</head>

<body>
	<div layout:fragment="content">
		<section class="S1_d py-5 my-5">
			<div class="container ">
				<div class="row">
					<div class="main col-12 m-0 col-lg-8">
						<div class="restaurant_section col card">
							<div id="ProRestaurant1" class="carousel slide" data-ride="carousel">
								<div class="carousel-inner">
									<div class="carousel-item active">
										<!--íƒ€ì„ë¦¬í”„ ê²½ë¡œ ë³€ê²½ kimssam-->
										<div class="image-container">
											<img th:src="@{{storeImage}(storeImage=${storeImage})}" alt="ê°€ê²Œ ì´ë¯¸ì§€ 1" />
										</div>
									</div>

								</div>
								<a class="carousel-control-prev" href="#ProRestaurant1" role="button" data-slide="prev"
									id="prevButton">
									<span class="carousel-control-prev-icon" aria-hidden="true"></span>
									<span class="sr-only">ì´ì „</span>
								</a>
								<a class="carousel-control-next" href="#ProRestaurant1" role="button" data-slide="next"
									id="nextButton">
									<span class="carousel-control-next-icon" aria-hidden="true"></span>
									<span class="sr-only">ë‹¤ìŒ</span>
								</a>
							</div>
							<div class="card-body" style="border-top: 1px solid #ccc;">
								<!-- ê°€ê²Œ ì´ë¦„ í‘œì‹œ -->
								<h5 class="card-title mb-0" th:text="${store.storeName}">ê°€ê²Œ ì´ë¦„</h5>
								<div class="d-flex justify-content-between align-items-center mt-2">
									<div class="d-flex">
										<!-- ê°€ê²Œ ì£¼ì†Œ -->
										<p class="card-text mr-2"><i class="bi bi-geo-alt"></i></p>
										<p class="restaurant_number">
											<span th:text="${store.basicAddress}">ê¸°ë³¸ ì£¼ì†Œ</span>,
											<span th:text="${store.detailAddress}">ìƒì„¸ ì£¼ì†Œ</span>
										</p>
									</div>
									<button class="btn btn-secondary btn-sm location-button">ì§€ë„ë³´ê¸°</button>
								</div>
								<div class="d-flex align-items-center mt-2">
									<!-- ê°€ê²Œ ì „í™”ë²ˆí˜¸ -->
									<p class="card-text mr-2"><i class="bi bi-plus-circle"></i></p>
									<p class="restaurant_number" th:text="${store.storeNumber}">ì „í™”ë²ˆí˜¸</p>
								</div>
								<div class="d-flex align-items-center mt-2">
									<!-- ê°€ê²Œ íƒœê·¸ -->
									<p class="card-text mr-2"><i class="bi bi-bookmark-plus"></i></p>
									<p class="restaurant_tag" th:text="${store.storeTagGroups}">ê°€ê²Œ íƒœê·¸</p>
								</div>
								<div class="d-flex align-items-center mt-2">
									<!-- ê°€ê²Œ ì„¤ëª… -->
									<p class="card-text mr-2"><i class="bi bi-chat-left-text"></i></p>
									<p class="restaurant_detail" th:text="${store.storeContent}">ê°€ê²Œ ì„¤ëª…</p>
								</div>
							</div>
						</div>

						<div class="d-block d-lg-none" style="border-top: 1px solid #ccc;">
							<div class="restaurant_mo_re_object bg-white">
								<div class="restaurant_re_title d-flex justify-content-between align-items-center">
									<h3 class="mt-3 ml-2 .text-light">ì˜ˆì•½ í•˜ê¸°</h3>
								</div>
								<div class="accordion S1_d_Check" id="selectAccordion">
									<!-- í…Œì´ë¸” ë‚ ì§œ ì²´í¬ -->
									<div class="card">
										<div class="card-header" id="headingDay">
											<div class="d-flex align-items-center" data-toggle="collapse"
												data-target="#collapseDay" aria-expanded="true"
												aria-controls="collapseDay">
												<label class="check_title col-4 col-xl-4 col-lg-5 mt-2">ë‚ ì§œ ì„ íƒ</label>
												<input type="text" class="col form-control selected-date-input" />
											</div>
										</div>
										<div id="collapseDay" class="collapse col" aria-labelledby="headingDay"
											data-parent="#selectAccordion">
											<div class="card-body calendar-container">
												<div class="calendar"></div>
												<div class="input-container">
													<input type="hidden" placeholder="ì„ íƒëœ ë‚ ì§œ"
														class="form-control mb-2 selected-date-input" />
												</div>
												<div class="Day-error-message Day-error-message-container"></div>
												<!-- ì˜¤ë¥˜ ë©”ì‹œì§€ ì˜ì—­ -->
											</div>
										</div>
									</div>

									<!-- í…Œì´ë¸” ì‹œê°„ ì²´í¬ -->
									<div class="card">
										<div class="card-header" id="headingTime">
											<div class="d-flex align-items-center" data-toggle="collapse"
												data-target="#collapseTime" aria-expanded="true"
												aria-controls="collapseTime">
												<label class="check_title col-4 col-xl-4 col-lg-5 mt-2">ì‹œê°„
													ì„ íƒ</label>
												<input type="text" class="form-control selected-time" />
											</div>
										</div>
										<div id="collapseTime" class="collapse time_show" aria-labelledby="headingTime"
											data-parent="#selectAccordion">


											<div class="card-body">
												<div class="time_check row justify-content-center">
													<div class="col d-flex align-items-center"
														style="white-space: nowrap;">
														<label for="startTime2">ì‹œì‘ ì‹œê°„:</label>
														<input class="ml-2 pl-2 mb-2 time-input" type="text"
															id="startTime1" th:value="${store.storeStarttime}"
															placeholder="00:00 í˜•ì‹ìœ¼ë¡œ ì…ë ¥" />
													</div>
													<div class="col d-flex align-items-center">
														<label for="endTime2">ë§ˆê° ì‹œê°„:</label>
														<input class="ml-2 pl-2 mb-2 time-input" type="text"
															id="endTime1" th:value="${store.storeEndTime}"
															placeholder="00:00 í˜•ì‹ìœ¼ë¡œ ì…ë ¥" />
													</div>
												</div>
											</div>



											<div class="error-message" id="error1">ì‹œì‘ ì‹œê°„ì´ ëë‚˜ëŠ” ì‹œê°„ë³´ë‹¤ ë¹¨ë¼ì•¼ í•˜ë©°, í˜•ì‹ì€
												HH:MMì´ì–´ì•¼ í•©ë‹ˆë‹¤.</div>
											<div class="mt-3 mb-5 time-buttons-container" id="timeButtons1"></div>
											<!-- ì¶”ê°€ëœ ë¶€ë¶„ -->
											<input type="hidden" id="selectedTimeInput1"
												class="form-control selected-time" />
										</div>
									</div>

									<!-- í…Œì´ë¸” ì¸ì› ì²´í¬ -->
									<div class="card">
										<div class="card-header" id="headingMember">
											<div class="d-flex align-items-center" data-toggle="collapse"
												data-target="#collapseMemver" aria-expanded="true"
												aria-controls="collapseMemver">
												<label class="check_title col-4 col-xl-4 col-lg-5 mt-2">ì¸ì› ì„ íƒ</label>
												<input type="text" class="form-control selected-Memver" />
											</div>
										</div>
										<div id="collapseMemver" class="collapse" aria-labelledby="headingMember"
											data-parent="#selectAccordion">
											<div class="card-body">
												<div class="button-container col-12">
													<button class="btn btn-secondary decrementBtn"
														onclick="decrement()">-</button>
													<span class="count col-10" id="count">1</span>
													<button class="btn btn-secondary incrementBtn"
														onclick="increment()">+</button>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="re-error-message" id="reformError1" style="display: none;">*ëª¨ë‘ ì„ íƒí•˜ì—¬ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤
								</div>
								<a href="#" class="col restaurant_re_btn">ì˜ˆì•½í•˜ê¸°</a>
							</div>
						</div>



						<!-- ì˜ì—…ì‹œê°„ -->
						<div class="restaurant_section card col">
							<div class="restaurant_time card-body" id="Business-hours">
								<div class="menu-item d-flex justify-content-between align-items-center mb-2">
									<h4>ì˜ì—… ì‹œê°„</h4>
									<span class="menuPrice" id="business_time">ì˜ì—… ì¤‘</span>
								</div>
								<span th:text="'ì˜¤í”ˆ ì‹œê°„: ' + ${store.storeStarttime}">ì˜¤í”ˆ ì‹œê°„</span>
								<span>~</span>
								<span th:text="'ë§ˆê° ì‹œê°„: ' + ${store.storeEndTime}">ë§ˆê° ì‹œê°„</span>
								<p>ì—°ì¤‘ ë¬´íœ´</p>
							</div>

							<!-- ë©”ë‰´ ì •ë³´ -->
							<div class="restaurant_menu card-body" id="more-menu">
								<h4>ë©”ë‰´ ì •ë³´</h4>
								<div class="menu-item d-flex align-items-center mb-2">
									<span class="menuName">ì§œì¥ë©´</span>
									<span class="dots mx-2"></span>
									<span class="menuPrice">5000 ì›</span>
								</div>
								<div class="menu-item d-flex align-items-center mb-2">
									<span class="menuName">ì§¬ë½•</span>
									<span class="dots mx-2"></span>
									<span class="menuPrice">7000 ì›</span>
								</div>
								<div class="menu-item d-flex align-items-center mb-2">
									<span class="menuName">íƒ•ìˆ˜ìœ¡(ëŒ€)</span>
									<span class="dots mx-2"></span>
									<span class="menuPrice">25000 ì›</span>
								</div>
								<div class="menu-item d-flex align-items-center mb-2">
									<span class="menuName">íƒ•ìˆ˜ìœ¡(ì¤‘)</span>
									<span class="dots mx-2"></span>
									<span class="menuPrice">17000 ì›</span>
								</div>
							</div>
							<a class="btn btn-link mt-2" id="more-button" style="display: none;">ë”ë³´ê¸°</a>
							<div class="menuCreate input-group mt-2">
								<input type="text" class="form-control" id="menu-name" placeholder="ë©”ë‰´ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
								<input type="text" class="form-control" id="menu-price" placeholder="ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”"
									oninput="this.value = this.value.replace(/[^0-9]/g, '');">
								<div class="menuCreateAppend input-group-append">
									<button class="btn btn-outline-secondary" id="add-button">ì¶”ê°€</button>
								</div>
							</div>
						</div>
					</div>
					<div class="restaurant_re_section d-none d-lg-block col-4 col-lg-0">
						<div class="restaurant_re_object " style="border: 1px solid #ccc;">
							<div class="restaurant_re_title d-flex justify-content-between align-items-center p-3 bg-white">
								<p>ì˜ˆì•½ í•˜ê¸°</p>
								<div class="d-flex">
									<span class="mr-2">ê³µìœ </span>
									<a href="javascript:void(0);" class="btn border mt-2 recommend"
										th:data-uri="@{|/store/vote/${store.storeId}|}">ğŸ‘ 
										<span class="badge bg-success">[[${#lists.size(store.voter)}]]</span>
									</a>
								</div>
							</div>
							<div class="accordion S1_d_Check" id="selectAccordion2">

								<!-- ë‹¬ë ¥ ì²´í¬ -->
								<div class="card">
									<div class="card-header" id="headingDay">

										<div class="d-flex align-items-center justify-content-center"
											data-toggle="collapse" data-target="#collapseDay" aria-expanded="true"
											aria-controls="collapseDay">
											<label class="check_title col-4 col-xl-4 col-lg-5 mt-2">ë‚ ì§œ ì„ íƒ</label>
											<input type="text" class="form-control selected-date-input setDay" />
										</div>
									</div>
									<div id="collapseDay" class="collapse col" aria-labelledby="headingDay"
										data-parent="#selectAccordion2">
										<div class="card-body calendar-container">
											<div class="calendar"></div>
											<div class="input-container">
												<input type="hidden" placeholder="ì„ íƒëœ ë‚ ì§œ"
													class="form-control mb-2 selected-date-input" />
											</div>
											<div class="Day-error-message Day-error-message-container"></div>
										</div>
									</div>
								</div>
								<!-- ì‹œê°„ ì²´í¬ -->
								<div class="card">
									<div class="card-header justify-content-center" id="headingTime">
										<div class="d-flex align-items-center" data-toggle="collapse"
											data-target="#collapseTime" aria-expanded="true"
											aria-controls="collapseTime">
											<label class="check_title col-4 col-xl-4 col-lg-5 mt-2">ì‹œê°„ ì„ íƒ</label>
											<input type="text" class="form-control selected-time setTime" />
										</div>
									</div>
									<div id="collapseTime" class="collapse time_show" aria-labelledby="headingTime"
										data-parent="#selectAccordion2">
										<div class="card-body">
											<div class="time_check row justify-content-center">
												<div class="col d-flex align-items-center" style="white-space: nowrap;">
													<label for="startTime2">ì‹œì‘ ì‹œê°„:</label>
													<input class="ml-2 pl-2 mb-2 time-input" type="text" id="startTime2"
														th:value="${store.storeStarttime}"
														placeholder="00:00 í˜•ì‹ìœ¼ë¡œ ì…ë ¥" />
												</div>
												<div class="col d-flex align-items-center">
													<label for="endTime2">ë§ˆê° ì‹œê°„:</label>
													<input class="ml-2 pl-2 mb-2 time-input" type="text" id="endTime2"
														th:value="${store.storeEndTime}" placeholder="00:00 í˜•ì‹ìœ¼ë¡œ ì…ë ¥" />
												</div>
											</div>
											<div class="re-error-message" id="error2">*ì‹œì‘ ì‹œê°„ì´ ëë‚˜ëŠ” ì‹œê°„ë³´ë‹¤ ë¹¨ë¼ì•¼ í•˜ë©°, *í˜•ì‹ì€
												HH:MMì´ì–´ì•¼ í•©ë‹ˆë‹¤.</div>
											<input type="hidden" id="selectedTimeInput2"
												class="form-control selected-time" />
											<div class="mt-3 mb-5 time-buttons-container" id="timeButtons2"></div>
										</div>
									</div>
								</div>

								<!-- ì¸ì› ì²´í¬ -->
								<div class="card">
									<div class="card-header" id="headingMember">
										<div class="d-flex align-items-center" data-toggle="collapse"
											data-target="#collapseMemver" aria-expanded="true"
											aria-controls="collapseMemver">
											<label class="check_title col-4 col-xl-4 col-lg-5 mt-2">ì¸ì› ì„ íƒ</label>
											<input type="text" class="form-control selected-Memver setMember"
												value="1" />
										</div>
									</div>
									<div id="collapseMemver" class="collapse" aria-labelledby="headingMember"
										data-parent="#selectAccordion2">
										<div class="card-body">
											<div class="button-container col-12">
												<button class="btn btn-secondary decrementBtn"
													onclick="decrement()">-</button>
												<span class="count col-10" id="count">1</span>
												<button class="btn btn-secondary incrementBtn"
													onclick="increment()">+</button>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="re-error-message" id="reformError2" style="display: none;">*ëª¨ë‘ ì„ íƒí•˜ì—¬ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤
							</div>
							<button class="col restaurant_re_btn">ì˜ˆì•½í•˜ê¸°</button>
						</div>
					</div>
				</div>
			</div>
			<div id="reservationModal" class="modal" role="dialog">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<form id="reservationForm"
							th:action="@{/reservation/create/{storeId}(storeId=${store.storeId})}" method="post">
							<div class="modal-header">
								<h5 class="modal-title">ì˜ˆì•½ í™•ì¸</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<p>ì˜ˆì•½ì„ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>

								<div class="form-group d-flex mt-2">
									<label class="modyfys" for=" reservationDay">ì„ íƒí•œ ë‚ ì§œ:</label>
									<input type="text" id="reservationDay" name="reservationDay" class="form-control"
										readonly>
								</div>
								<div class="form-group d-flex">
									<label class="modyfys" for="reservationtTime">ì„ íƒí•œ ì‹œê°„:</label>
									<input type="text" id="reservationtTime" name="reservationtTime"
										class="form-control" readonly>
								</div>
								<div class="form-group d-flex">
									<label class="modyfys" for="reservationMember">ì¸ì›ìˆ˜:</label>
									<input type="text" id="reservationMember" name="reservationMember"
										class="form-control" readonly>
								</div>



							</div>
							<div class="modal-footer d-flex ">
								<button type="submit" class="btn btn-primary" id="confirmReservation">í™•ì¸</button>
								<button type="button" class="btn btn-secondary" data-dismiss="modal">ì·¨ì†Œ</button>
							</div>
						</form>
					</div>
				</div>
			</div>

			<script src="/js/store/store_detail.js"></script>
			<script>
				document.addEventListener('DOMContentLoaded', function () {
					const reservationButtons = document.querySelectorAll('.restaurant_re_btn');
					const reservationModal = document.getElementById('reservationModal');
					const reservationDay = document.getElementById('reservationDay');
					const reservationtTime = document.getElementById('reservationtTime');
					const reservationMember = document.getElementById('reservationMember');


					reservationButtons.forEach(button => {
						button.addEventListener('click', function () {
							// ì„ íƒí•œ ê°’ ê°€ì ¸ì˜¤ê¸°
							const selectedDate = document.querySelector('.setDay').value;
							const selectedTime = document.querySelector('.setTime').value; // ì‹œì‘ ì‹œê°„
							const selectedPeople = document.querySelector('.setMember').value;

							// ëª¨ë‹¬ì— ê°’ ì„¤ì •
							reservationDay.value = selectedDate;
							reservationtTime.value = selectedTime;
							reservationMember.value = selectedPeople;
							// ì—ëŸ¬ ë©”ì‹œì§€ ì´ˆê¸°í™”
							document.getElementById('reformError1').style.display = 'none';
							document.getElementById('reformError2').style.display = 'none';

							// ê°’ì´ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸
							if (!selectedDate || !reservationtTime || !reservationMember) {
								document.getElementById('reformError1').style.display = 'block';
								document.getElementById('reformError2').style.display = 'block';
								return;
							}

							$(reservationModal).modal('show'); // ëª¨ë‹¬ ì—´ê¸°
						});
					});

					document.getElementById('confirmReservation').addEventListener('click', function () {
						// ì˜ˆì•½ ë¡œì§ì„ ì—¬ê¸°ì— ì¶”ê°€
						alert('ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.'); // ì˜ˆì‹œë¡œ ì•Œë¦¼ì°½ì„ ë„ì›€
						$(reservationModal).modal('hide'); // ëª¨ë‹¬ ë‹«ê¸°
					});




				});
				const recommend_elements = document.getElementsByClassName("recommend");
						Array.from(recommend_elements).forEach(function(element){
							element.addEventListener("click",function(){
								if(confirm("ì •ë§ë¡œ ì¶”ì²œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
									location.href=this.dataset.uri;
								}
							})
						})


			</script>
		</section>
	</div>
</body>

</html>